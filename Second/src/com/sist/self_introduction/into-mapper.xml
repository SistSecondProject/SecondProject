<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.sist.dao.into-mapper">
<!-- 자기소개서함 리스트 띄우기 -->
<select id="intoListData" resultType="IntroductionVO" parameterType="java.util.Map">     
     SELECT no,content,regdate,num
     FROM (SELECT no,content,regdate,rownum as num
     FROM (SELECT no,content,regdate 
     FROM User_Introduction ORDER BY no DESC))
     WHERE num BETWEEN #{start} AND #{end}
    
     
        <!--  WHERE num BETWEEN ? AND ?
         ps.setInt(1,map.get("start"))
         ps.setInt(2,map.get("end")) 
         
     SELECT no,content,regdate,num
     FROM (SELECT no,content,regdate,rownum as num
     FROM (SELECT no,content,regdate 
     FROM User_Introduction ORDER BY no DESC))
     WHERE num BETWEEN #{start1} AND #{end1}
         
         
         -->
         
      </select>
 
     <!-- 총페이지 읽기 -->
    
   <select id="intoTotalPage" resultType="int">
     SELECT CEIL(COUNT(*)/10) FROM User_Introduction
   </select> 

 <!-- 내용 추가   아직안 됨-->    
     
   <insert id="intoInsert" parameterType="IntroductionVO">
         INSERT INTO User_Introduction VALUES(
       (SELECT NVL(MAX(no)+1,1) FROM User_Introduction),
       #{content},
       SYSDATE,0
     )
   </insert>
 
 
   <!--  content(내용보기)-->
   <sql id="where-no">
     WHERE no=#{no}
   </sql> 
   
   <select id="infoContentData" resultType="IntroductionVO" parameterType="int">
     SELECT no,content
     FROM User_Introduction
     WHERE no=#{no}
   </select>
   
 
   
<!--   
    수정하기 : 먼저 비밀 번호를 갖고 들어온다.
   <select id="boardGetPwd" resultType="String" parameterType="int">
   SELECT pwd FROM User_Introduction
   <include refid="where-no"/>
   </select>
  -->
   
  <!--  <update id="intoUpdateData" parameterType="int">
   UPDATE User_Introduction SET
   content=#{content}
   WHERE no=#{no}
   </update> -->
   
    
   
</mapper>